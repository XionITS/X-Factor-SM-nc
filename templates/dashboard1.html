{% extends 'base.html' %}
{% block content %}
{% load static %}
<!-- BEGIN #header -->
<!-- END #header -->
<!-- BEGIN #sidebar -->
<!-- END #sidebar -->
<!-- BEGIN #content -->
{% if menu_list %}
<div id="content" class="dashboard-content">
    <div class="row justify-content-sm-between">
        <div class="d-flex justify-content-end mb-2">
            {% if "dash_report" in menu_list|join:" " %}
            <button id="reportPop" class="btn btn-secondary" type="button" data-bs-display="static" aria-expanded="false">
                    Report
            </button>
            {% else %}
            <button id="reportPop" class="btn btn-secondary" type="button" data-bs-display="static" aria-expanded="false" DISABLED>
                    Report
            </button>
            {% endif %}


            <!--데이터피커-->
            <div class="me-3">
                {% if "dash_daily" in menu_list|join:" " %}
                <div id="auth_daily" class="input-group">
                    <input type="text" class="form-control" id="datepickerD" name="datepicker1" placeholder="{{ dataList.selected_date }}" readonly>
                    <button class="input-group-text" for="datepickerD">
                        <i class="fa fa-calendar"></i>
                    </button>
                </div>
            </div>
            {% else %}
                <div id="auth_daily" class="input-group" style="display:none;">
                    <input type="text" class="form-control" id="datepickerD" name="datepicker1" placeholder="{{ dataList.selected_date }}" readonly>
                    <button class="input-group-text" for="datepickerD">
                        <i class="fa fa-calendar"></i>
                    </button>
                </div>
            </div>
            {% endif %}
            <!--지사별 버튼-->
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle menu-link" type="button" data-bs-display="static" data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                    지사별
                </button>
                <ul class="new-dropdown-menu dropdown-menu-sm-start w-80px">
                    <li><a class="dropdown-item" href="#">NCK</a></li>
<!--                    <li><a class="dropdown-item" href="#">NCA</a></li>-->
<!--                    <li><a class="dropdown-item" href="#">NCT</a></li>-->
<!--                    <li><a class="dropdown-item" href="#">NCJ</a></li>-->
<!--                    <li><a class="dropdown-item" href="#">NCVVS</a></li>-->
                </ul>
            </div>
        </div>
        <div class="col-xxl-8 col-xl-8 col-lg-12 col-md-12 col-12 flex-fill">
            <div class="card mb-3" style="height: 275px;">
                <div class="card-body col-12 d-flex" style="height: 275px;">
                    {% if "dash_all_asset" in menu_list|join:" " %}
                    <div id="auth_all_asset1" class="col-6">
                        <div class="d-flex fw-bold fs-12px">
                            <div class="d-flex flex-grow-1 justify-content-between" style="font-size: 17px">
                                전체 자산 수
                                <div id="totalDataDiv" style="font-size:14px"></div>
                            </div>
                        </div>
                        <!--                        <div class='text-end mx-50px' style="font-size:14px;" id="totalDataDiv"></div>-->
                        <div id="asset_all_chart"></div>
                    </div>
                    <div id="auth_all_asset2"  class="col-6">
                        <div id="asset_all_os_chart1"></div>
                        <div id="asset_all_os_chart2"></div>
                    </div>
                    {% else %}
                    <div id="auth_all_asset1" class="col-6">
                        <div class="d-flex fw-bold fs-12px">
                            <div class="d-flex flex-grow-1 justify-content-between" style="font-size: 17px">
                                전체 자산 수
                                <div id="totalDataDiv" style="font-size:14px"></div>
                            </div>
                                                <div class="flex-column ms-3 mt-5 text-center">
                                    <h2 style="margin-top: 50px;">권한 없음</h2>
                                </div>
                        </div>
                        <!--                        <div class='text-end mx-50px' style="font-size:14px;" id="totalDataDiv"></div>-->

                    </div>

                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <!--        <div class="col-xxl-2 col-xl-4 col-lg-6 col-md-6 col-12 flex-fill">-->
        <!--            <div class="card mb-3" style="height: 258px;">-->
        <!--                <div class="card-body h-220px">-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2">-->
        <!--                        <div class="flex-grow-1">OS 설치 현황</div>-->
        <!--                    </div>-->
        <!--                    <div class="row align-items-center">-->
        <!--                        <div class="h-145px">-->
        <!--                            <div class="col-12">-->
        <!--                                <div class="mt-2" id="os_donut" style="width: 80%; margin: 0 auto;"></div>-->
        <!--                            </div>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <!--        <div class="col-xxl-2 col-xl-4 col-lg-6 col-md-6 col-12 flex-fill">-->
        <!--            <div class="card mb-3" style="height: 258px;">-->
        <!--                <div class="card-body h-220px">-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2">-->
        <!--                        <div class="flex-grow-1">유/무선 연결 현황</div>-->
        <!--                    </div>-->
        <!--                    <div class="row align-items-center">-->
        <!--                        <div class="h-145px">-->
        <!--                            <div class="col-12">-->
        <!--                                <div class="mt-2" id="wire_donut" style="width: 80%; margin: 0 auto;"></div>-->
        <!--                            </div>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <div class="col-xxl-2 col-xl-4 col-lg-7 col-md-6 col-12 flex-fill">
            <div class="card mb-3" style="height: 275px;">
                <div class="card-body h-220px">
                    <div class="d-flex fw-bold fs-12px ">
                        <div class="flex-grow-1" style="font-size: 17px">장기 미접속 자산 ( 150 days )</div>
                    </div>
                    <div class="row align-items-center">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-center">
                            {% if "dash_longago" in menu_list|join:" " %}
                                <div id="apexnotconChart"></div>
                                <div class="flex-column ms-3 text-center">
                                    <p class="discover-text">증감률</p>
                                    <p class="discover-count" id="apexnotconChart_sub"></p>
                                    <p class="discover-state-per" id="apexnotconChart_per"></p>
                                </div>
                            {% else %}
                                <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                            {% endif %}

                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <!--        <div class="col-xl-3 col-l-3 pl-2">-->
        <!--            <div class="card mb-3" style="height:550px">-->
        <!--                <div class="card-body">-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2">-->
        <!--                        <div class="flex-grow-1">최대 MEMORY 점유 프로세스 Top 14</div>-->
        <!--                    </div>-->
        <!--                    <table class="table table-memProc text-nowrap " width="100%" style="border-collapse: separate; border-spacing : 0 10px">-->
        <!--                        <thead>-->
        <!--                        <tr>-->
        <!--                            <th style="width: 20%;">No</th>-->
        <!--                            <th style="width: 50%;">프로세스 이름</th>-->
        <!--                            <th style="text-align:center; width: 30%;">자산 수</th>-->
        <!--                        </tr>-->
        <!--                        </thead>-->
        <!--                        <tbody class="fw-bold fs-12px mb-2" id="table-memProc-body">-->
        <!--                        {% for data in dataList.highMemProc_listData %}-->
        <!--                        <tr>-->
        <!--                            <td>-->
        <!--                                {{ forloop.counter }}-->
        <!--                            </td>-->
        <!--                            <td class="ellipsis">-->
        <!--                                <a href="#" class="highMemProc-link" data-id="{{data.item}}">-->
        <!--                                    {{ data.item }}-->
        <!--                                </a>-->
        <!--                            </td>-->
        <!--                            <td style="text-align:center;">-->
        <!--                                {{ data.count }}-->
        <!--                            </td>-->
        <!--                        </tr>-->
        <!--                        {% endfor %}-->
        <!--                        </tbody>-->
        <!--                    </table>-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2 mt-3">-->
        <!--                        <div class="flex-grow-1">MEMORY 사용률 초과 서버</div>-->
        <!--                    </div>-->
        <!--                    <div class="mb-2 fs-5 text-truncate">897 / 2798 대</div>-->
        <!--                    <div class="progress h-3px bg-secondary-transparent-2 mb-1">-->
        <!--                        <div id="mem-bar" class="progress-bar bg-white"></div>-->
        <!--                    </div>-->
        <!--                    <div class="fs-11px text-inverse text-opacity-50 mb-2 text-truncate">-->
        <!--                        95% 초과-->
        <!--                    </div>-->

        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <!--        <div class="col-xl-3 col-l-3 pl-2">-->
        <!--            <div class="card mb-3" style="height:550px">-->
        <!--                <div class="card-body">-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2">-->
        <!--                        <div class="flex-grow-1">최대 CPU 점유 프로세스 Top 14</div>-->
        <!--                    </div>-->
        <!--                    <table class="table table-cpuProc text-nowrap " width="100%" style="border-collapse: separate; border-spacing : 0 10px">-->
        <!--                        <thead>-->
        <!--                        <tr>-->
        <!--                            <th style="width: 20%;">No</th>-->
        <!--                            <th style="width: 50%;">프로세스 이름</th>-->
        <!--                            <th style="text-align:center; width: 30%;">자산 수</th>-->
        <!--                        </tr>-->
        <!--                        </thead>-->
        <!--                        <tbody class="fw-bold fs-12px mb-2" id="table-cpuProc-body">-->
        <!--                        {% for data in dataList.highCpuProc_listData %}-->
        <!--                        <tr>-->
        <!--                            <td>-->
        <!--                                {{ forloop.counter }}-->
        <!--                            </td>-->
        <!--                            <td class="ellipsis">-->
        <!--                                <a href="#" class="highCpuProc-link" data-id="{{data.item}}">-->
        <!--                                    {{ data.item }}-->
        <!--                                </a>-->
        <!--                            </td>-->
        <!--                            <td style="text-align:center;">-->
        <!--                                {{ data.count }}-->
        <!--                            </td>-->
        <!--                        </tr>-->
        <!--                        {% endfor %}-->
        <!--                        </tbody>-->
        <!--                    </table>-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2 mt-3">-->
        <!--                        <div class="flex-grow-1">CPU 사용률 초과 서버</div>-->
        <!--                    </div>-->
        <!--                    <div class="mb-2 fs-5 text-truncate">540 / 2798 대</div>-->
        <!--                    <div class="progress h-3px bg-secondary-transparent-2 mb-1">-->
        <!--                        <div id="cpu-bar" class="progress-bar bg-white"></div>-->
        <!--                    </div>-->
        <!--                    <div class="fs-11px text-inverse text-opacity-50 mb-2 text-truncate">-->
        <!--                        95% 초과-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <!--        <div class="col-xl-3 col-l-3 pl-2">-->
        <!--            <div class="card mb-3" style="height:550px">-->
        <!--                <div class="card-body">-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-2">-->
        <!--                        <div class="flex-grow-1">최대 DISK 점유 어플리케이션 Top 14</div>-->
        <!--                    </div>-->
        <!--                    <table class="table table-diskApp text-nowrap " width="100%" style="border-collapse: separate; border-spacing : 0 10px">-->
        <!--                        <thead>-->
        <!--                        <tr>-->
        <!--                            <th style="width: 20%;">No</th>-->
        <!--                            <th style="width: 50%;">어플리케이션 이름</th>-->
        <!--                            <th style="text-align:center; width: 30%;">자산 수</th>-->
        <!--                        </tr>-->
        <!--                        </thead>-->
        <!--                        <tbody class="fw-bold fs-12px mb-2" id="table-diskApp-body">-->
        <!--                        {% for data in dataList.highDiskApp_listData %}-->
        <!--                        <tr>-->
        <!--                            <td>-->
        <!--                                {{ forloop.counter }}-->
        <!--                            </td>-->
        <!--                            <td class="ellipsis">-->
        <!--                                <a href="#" class="highDiskApp-link" data-id="{{data.item}}">-->
        <!--                                    {{ data.item }}-->
        <!--                                </a>-->
        <!--                            </td>-->
        <!--                            <td style="text-align:center;">-->
        <!--                                {{ data.count }}-->
        <!--                            </td>-->
        <!--                        </tr>-->
        <!--                        {% endfor %}-->
        <!--                        </tbody>-->
        <!--                    </table>-->
        <!--                    <div class="d-flex fw-bold fs-12px mb-3 mt-3">-->
        <!--                        <div class="flex-grow-1">DISK 사용률 초과 서버</div>-->
        <!--                    </div>-->
        <!--                    <div class="mb-2 fs-5 text-truncate">245 / 2798 대</div>-->
        <!--                    <div class="progress h-3px bg-secondary-transparent-2 mb-1">-->
        <!--                        <div id="disk-bar" class="progress-bar bg-white"></div>-->
        <!--                    </div>-->
        <!--                    <div class="fs-11px text-inverse text-opacity-50 mb-2 text-truncate">-->
        <!--                        95% 초과-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <div class="col-xl-4 col-l-3 pr-2">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px">
                        <div class="flex-grow-1" style="font-size: 17px">위치별 자산 현황</div>
                    </div>
                    {% if "dash_locate" in menu_list|join:" " %}
                    <div id="location_bar"></div>
                    {% else %}
                    <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-l-3 pr-2">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1" style="font-size: 17px">Office 버전별 통계</div>
                    </div>
                    {% if "dash_office" in menu_list|join:" " %}
                    <div id="office_donut"></div>
                    {% else %}
                                        <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-l-3 pr-2">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1" style="font-size: 17px">월별 자산 변화 수</div>
                    </div>
                {% if "dash_month" in menu_list|join:" " %}
                    <div id="chAsset_line"></div>
                    {% else %}
                                                            <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <!--        <div class="col-xl-6 col-l-3 pr-2">-->
        <!--            <div class="card mb-3" style="height:267px;">-->
        <!--                <div class="card-body">-->
        <!--                    <div class="d-flex fw-bold fs-12px ">-->
        <!--                        <div class="flex-grow-1" style="font-size: 17px">OS버전별 자산 현황</div>-->
        <!--                    </div>-->
        <!--                    <br>-->
        <!--                    <div class="d-flex align-items-center justify-content-sm-between">-->
        <!--                        <div class="col-3" >-->
        <!--                            <div class="mt-n2 mb-n2" id="os_pie"></div>-->
        <!--                        </div>-->
        <!--                        <div class="d-flex col-11" >-->
        <!--                            <div class="col-4 small text-white text-opacity-50 new-text-truncate ps-3" style="font-size: 15px" >-->
        <!--                                {% for data in dataList.os_asset_data_list.first_half %}-->
        <!--                                <i class="fas fa-server fa-fw me-1"></i>-->
        <!--                                <span title="{{data.item}}">{{data.item}}</span>-->
        <!--                                <br>-->
        <!--                                <br>-->
        <!--                                {% endfor %}-->
        <!--                            </div>-->
        <!--                            <div class="col-1"  style="font-size: 16px">-->
        <!--                                {% for data in dataList.os_asset_data_list.first_half %}-->
        <!--                                <div class="small text-white text-opacity-50 new-text-truncate text-center" title="{{data.value}}">{{data.item_count}}</div>-->
        <!--                                <br>-->
        <!--                                {% endfor %}-->
        <!--                            </div>-->
        <!--                            <div class="col-4 small text-white text-opacity-50 new-text-truncate ps-3" style="font-size: 15px">-->
        <!--                                {% for data in dataList.os_asset_data_list.second_half %}-->
        <!--                                <i class="fas fa-server fa-fw me-1" ></i>-->
        <!--                                <span title="{{data.item}}">{{data.item}}</span>-->
        <!--                                <br>-->
        <!--                                <br>-->
        <!--                                {% endfor %}-->
        <!--                            </div>-->
        <!--                            <div class="col-1" style="font-size: 16px">-->
        <!--                                {% for data in dataList.os_asset_data_list.second_half %}-->
        <!--                                <div class="small text-white text-opacity-50 new-text-truncate text-center" title="{{data.value}}" >{{data.item_count}}</div>-->
        <!--                                <br>-->
        <!--                                {% endfor %}-->
        <!--                            </div>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                </div>-->
        <!--                <div class="card-arrow">-->
        <!--                    <div class="card-arrow-top-left"></div>-->
        <!--                    <div class="card-arrow-top-right"></div>-->
        <!--                    <div class="card-arrow-bottom-left"></div>-->
        <!--                    <div class="card-arrow-bottom-right"></div>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
        <div class="col-xl-4 col-l-4 pr-2 flex-fill">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px">
                        <div class="flex-grow-1" style="font-size: 17px">Windows 버전별 자산 목록 (Top 6)</div>
                    </div>
                    {% if "dash_win_ver" in menu_list|join:" " %}
                    <div class="d-flex col-xl-12">
                        <div class="d-flex w-50 mt-3">
                            <div class="d-flex w-100">
                                <div class="w-75 align-items-center small text-white text-opacity-50 new-text-truncate fs-14px">

                                    {% for data in  dataList.os_asset_data_list %}
                                    <div class="mb-2">
                                        <i class="fas fa-server fa-fw me-1 color-{{ forloop.counter }}"></i>
                                        <span>{{data.item}}</span>
                                    </div>

                                    {% endfor %}
                                </div>
                                <div class="w-25 small text-white text-opacity-50 new-text-truncate text-center fs-15px">
                                    {% for data in dataList.os_asset_data_list %}
                                    <div class="mb-2">
                                        <span title="">{{data.item_count}}</span>
                                    </div>

                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div id="windowAsset_pie" class="w-50"></div>


                    </div>
                {% else %}
                                <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                            {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-l-2 pr-2 flex-fill">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px ">
                        <div class="flex-grow-1" style="font-size: 17px">Windows 버전별 자산 현황</div>
                    </div>
                    {% if "dash_win_update" in menu_list|join:" " %}
                    <div id="os_pie"></div>
                    {% else %}
                    <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-l-2 pr-2 flex-fill">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px">
                        <div class="flex-grow-1" style="font-size: 17px">보안 패치별 자산 현황</div>
                    </div>
                    {% if "dash_win_hotfix" in menu_list|join:" " %}
                    <div id="hotfix_donut"></div>
                    {% else %}
                    <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}

                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-2 col-l-2 pr-2 flex-fill">
            <div class="card mb-3" style="height:267px;">
                <div class="card-body">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1" style="font-size: 17px">태니엄 프로세스 CPU 사용량</div>
                    </div>
                    {% if "dash_tanium" in menu_list|join:" " %}
                    <div id="apexcpuChart"></div>
                    {% else %}
                    <div class="flex-column ms-3 mt-5 text-center">
                                    <h2>권한 없음</h2>
                                </div>
                    {% endif %}
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <!--<div class="col-xl-4 col-l-4 pr-2">
            <div class="card mb-3 ">
                <div class="card-body h-205px">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1">관리 자산</div>
                    </div>
                    <div class="row align-items-center">
                        <div class="h-145px">
                            <div class="col-12">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-l-4 pl-2">
            <div class="card mb-3">
                <div class="card-body h-205px">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1">미관리 자산</div>
                    </div>
                    <div class="row align-items-center">
                        <div class="h-145px">
                            <div class="col-12">

                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>
        <div class="col-xl-4 col-l-4 pr-2">
            <div class="card mb-3">
                <div class="card-body h-205px">
                    <div class="d-flex fw-bold fs-12px mb-2">
                        <div class="flex-grow-1">자산 관리 현황</div>
                        <div class="d-flex fw-bold fs-17px mb-2"></div>
                    </div>
                    <div class="row align-items-center">
                        <div class="h-145px">
                            <div class="col-12">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-arrow">
                    <div class="card-arrow-top-left"></div>
                    <div class="card-arrow-top-right"></div>
                    <div class="card-arrow-bottom-left"></div>
                    <div class="card-arrow-bottom-right"></div>
                </div>
            </div>
        </div>-->
    </div>
    <!-- END row -->
</div>
{% endif %}
<div class="modal" name="DashModal" id="DashModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content" style="background-color:#1d2835;">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>
                        <a class="btn btn-outline-warning export" onclick="exportToExcel()">Export to Excel</a>
                    </div>
                    <div class="modal-body">

                        <table id="" class="table m" style="width: 100%">
                            <thead class="allAthead">
                            <tr class="">
                                <th style="text-align: center">No</th>
                                <th style="text-align: center">부서</th>
                                <th style="text-align: center">컴퓨터이름</th>
                                <th style="text-align: center">사용자</th>
                                <th style="text-align: center">IP</th>
                                <th style="text-align: center">MAC</th>
<!--                                <th scope="col" style="text-align: center">Email</th>-->
                            </tr>
<!--                            <th scope="col" style="text-align: center">업데이트 날짜</th>-->
                            </thead>
                            <tbody>

                            </tbody>
<!--                            <tbody class="allAtbody"></tbody>-->
                        </table>
                    </div>
                        <input type="hidden" id="categoryName" value="">
                        <input type="hidden" id="seriesName" value="">
                        <input type="hidden" id="chartName" value="">
                        <input type="hidden" id="selectedDate" value="">
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

<script>

document.getElementById('reportPop').addEventListener('click', function() {
    window.open('../report', 'PopupWindowName', 'width=600,height=400,scrollbars=no,resizable=no');
});

    function exportToExcel() {
        if( confirm("추출 하시겠습니까?") ) {
            // seriesName의 값을 가져옵니다.
            var seriesName = document.getElementById('seriesName').value;
            var categoryName = document.getElementById('categoryName').value;
            var chartName = document.getElementById('chartName').value;
            var selectedDate = document.getElementById('selectedDate').value;
            // Django가 반환하는 상대 URL에 원점을 추가하여 절대 URL을 만듭니다.
            var relativeUrl = "{% url 'export' model='Xfactor_Common_Cache' %}";
            var absoluteUrl = window.location.origin + relativeUrl;

            // 절대 URL으로 'URL' 객체를 생성합니다.
            var url = new URL(absoluteUrl);

            url.searchParams.set('parameter_name', chartName);
            url.searchParams.set('seriesName', seriesName);
            url.searchParams.set('categoryName', categoryName);
            url.searchParams.set('selectedDate', selectedDate);
            // 변경된 URL로 이동합니다.
            window.location.href = url.toString();
        }
}


//-----------------세션만료알림창---------------------------
    var sessionTimeout = 240 * 60 * 1000; // 4시간을 밀리초로 변환

    // 세션 만료 시간 후에 실행될 함수를 설정합니다.
    var sessionTimeoutAlert = setTimeout(function() {
        alert('세션이 만료되었습니다. 다시 로그인 해주세요.'); location.reload();
    }, sessionTimeout);

    // 사용자의 행동을 감지해서 세션 만료 시간을 재설정하는 함수입니다.
    function resetSessionTimeout() {
        clearTimeout(sessionTimeoutAlert);
        sessionTimeoutAlert = setTimeout(function() {
            alert('세션이 만료되었습니다. 다시 로그인 해주세요.'); location.reload();
        }, sessionTimeout);
    }

    // 클릭 또는 키 입력 등 사용자의 행동을 감지하도록 이벤트 리스너를 추가합니다.
    window.addEventListener('mousemove', resetSessionTimeout);
    window.addEventListener('keypress', resetSessionTimeout);


</script>

<!-- END #content -->
{% endblock %}